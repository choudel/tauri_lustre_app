var x=class{withFields(e){let r=Object.keys(this).map(n=>n in e?e[n]:this[n]);return new this.constructor(...r)}},Ae=class{static fromArray(e,r){let n=r||new m;for(let i=e.length-1;i>=0;--i)n=new oe(e[i],n);return n}[Symbol.iterator](){return new Gt(this)}toArray(){return[...this]}atLeastLength(e){let r=this;for(;e-- >0&&r;)r=r.tail;return r!==void 0}hasLength(e){let r=this;for(;e-- >0&&r;)r=r.tail;return e===-1&&r instanceof m}countLength(){let e=this,r=0;for(;e;)e=e.tail,r++;return r-1}};function a(t,e){return new oe(t,e)}function w(t,e){return Ae.fromArray(t,e)}var Gt=class{#e;constructor(e){this.#e=e}next(){if(this.#e instanceof m)return{done:!0};{let{head:e,tail:r}=this.#e;return this.#e=r,{value:e,done:!1}}}},m=class extends Ae{},oe=class extends Ae{constructor(e,r){super(),this.head=e,this.tail=r}};var st=class t extends x{static isResult(e){return e instanceof t}},O=class extends st{constructor(e){super(),this[0]=e}isOk(){return!0}},M=class extends st{constructor(e){super(),this[0]=e}isOk(){return!1}};function Wt(t,e,r,n,i,s,u){let o=new globalThis.Error(s);o.gleam_error=t,o.file=e,o.module=r,o.line=n,o.function=i,o.fn=i;for(let l in u)o[l]=u[l];return o}var G=class extends x{},W=class extends x{},ge=class extends x{};var fe=class extends x{};var ki=5,Jt=Math.pow(2,ki),xo=Jt-1,$o=Jt/2,bo=Jt/4;var Y=class extends x{},Te=class extends x{};function ut(t,e){for(;;){let r=t,n=e;if(r instanceof m)return n;{let i=r.head;t=r.tail,e=a(i,n)}}}function X(t){return ut(t,w([]))}function Ei(t,e){for(;;){let r=t,n=e;if(r instanceof m)return n;{let i=r.head;t=r.tail,e=a(i,n)}}}function Kt(t,e){return Ei(X(t),e)}function pe(t,e,r){for(;;){let n=t,i=e,s=r;if(n instanceof m)return i;{let u=n.head;t=n.tail,e=s(i,u),r=s}}}function Si(t,e,r,n,i,s){for(;;){let u=t,o=e,l=r,c=n,p=i,_=s,h=a(p,l);if(u instanceof m)return c instanceof Y?a(X(h),_):a(h,_);{let y=u.head,b=u.tail,j=o(p,y);if(c instanceof Y)if(j instanceof G)t=b,e=o,r=h,n=c,i=y,s=_;else if(j instanceof W)t=b,e=o,r=h,n=c,i=y,s=_;else{let d;c instanceof Y?d=a(X(h),_):d=a(h,_);let E=d;if(b instanceof m)return a(w([y]),E);{let $=b.head,k=b.tail,A,f=o(y,$);f instanceof G?A=new Y:f instanceof W?A=new Y:A=new Te;let g=A;t=k,e=o,r=w([y]),n=g,i=$,s=E}}else if(j instanceof G){let d;c instanceof Y?d=a(X(h),_):d=a(h,_);let E=d;if(b instanceof m)return a(w([y]),E);{let $=b.head,k=b.tail,A,f=o(y,$);f instanceof G?A=new Y:f instanceof W?A=new Y:A=new Te;let g=A;t=k,e=o,r=w([y]),n=g,i=$,s=E}}else if(j instanceof W){let d;c instanceof Y?d=a(X(h),_):d=a(h,_);let E=d;if(b instanceof m)return a(w([y]),E);{let $=b.head,k=b.tail,A,f=o(y,$);f instanceof G?A=new Y:f instanceof W?A=new Y:A=new Te;let g=A;t=k,e=o,r=w([y]),n=g,i=$,s=E}}else t=b,e=o,r=h,n=c,i=y,s=_}}}function Ai(t,e,r,n){for(;;){let i=t,s=e,u=r,o=n;if(i instanceof m)return ut(s,o);if(s instanceof m)return ut(i,o);{let l=i.head,c=i.tail,p=s.head,_=s.tail,h=u(l,p);h instanceof G?(t=c,e=s,r=u,n=a(l,o)):h instanceof W?(t=i,e=_,r=u,n=a(p,o)):(t=i,e=_,r=u,n=a(p,o))}}}function zi(t,e,r){for(;;){let n=t,i=e,s=r;if(n instanceof m)return X(s);{let u=n.tail;if(u instanceof m){let o=n.head;return X(a(X(o),s))}else{let o=n.head,l=u.head,c=u.tail,p=Ai(o,l,i,w([]));t=c,e=i,r=a(p,s)}}}}function Ti(t,e,r,n){for(;;){let i=t,s=e,u=r,o=n;if(i instanceof m)return ut(s,o);if(s instanceof m)return ut(i,o);{let l=i.head,c=i.tail,p=s.head,_=s.tail,h=u(l,p);h instanceof G?(t=i,e=_,r=u,n=a(p,o)):h instanceof W?(t=c,e=s,r=u,n=a(l,o)):(t=c,e=s,r=u,n=a(l,o))}}}function Ci(t,e,r){for(;;){let n=t,i=e,s=r;if(n instanceof m)return X(s);{let u=n.tail;if(u instanceof m){let o=n.head;return X(a(X(o),s))}else{let o=n.head,l=u.head,c=u.tail,p=Ti(o,l,i,w([]));t=c,e=i,r=a(p,s)}}}}function Bi(t,e,r){for(;;){let n=t,i=e,s=r;if(n instanceof m)return n;if(i instanceof Y){if(n.tail instanceof m)return n.head;t=zi(n,s,w([])),e=new Te,r=s}else if(n.tail instanceof m){let o=n.head;return X(o)}else t=Ci(n,s,w([])),e=new Y,r=s}}function rn(t,e){if(t instanceof m)return t;{let r=t.tail;if(r instanceof m)return t;{let n=t.head,i=r.head,s=r.tail,u,o=e(n,i);o instanceof G?u=new Y:o instanceof W?u=new Y:u=new Te;let l=u,c=Si(s,e,w([n]),l,i,w([]));return Bi(c,new Y,e)}}}var vt=class extends x{constructor(e){super(),this.function=e}};function Fe(t,e){let r=e.function(t),n,i;return n=r[0],i=r[1],i instanceof m?new O(n):new M(i)}function Zt(t){return new vt(e=>[t,w([])])}function jt(t,e){return new vt(r=>{let n=t.function(r),i,s;return i=n[0],s=n[1],[e(i),s]})}function Ve(t){return t.toString()}function er(t,e){return t.startsWith(e)}var ln=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),su=new RegExp(`^[${ln}]*`),ou=new RegExp(`[${ln}]*$`);function Hi(t,e){for(;;){let r=t,n=e;if(r instanceof m)return n;{let i=r.head;t=r.tail,e=n+i}}}function an(t){return Hi(t,"")}function fn(t){return Object.fromEntries(t)}function Ge(t){return t}function rr(t){return t}function At(t){return fn(t)}function pn(t,e,r){return t?e:r()}function K(t){return t}var re=()=>globalThis?.document,zt="http://www.w3.org/1999/xhtml",Tt=1,nr=3;var _n=!!globalThis.HTMLElement?.prototype?.moveBefore;var S=w([]),Ct=new fe;var ns=new ge,is=new G,ss=new W;function Bt(t,e){return t.name===e.name?ss:t.name<e.name?is:ns}var ue=class extends x{constructor(e,r,n){super(),this.kind=e,this.name=r,this.value=n}},Je=class extends x{constructor(e,r,n){super(),this.kind=e,this.name=r,this.value=n}},Q=class extends x{constructor(e,r,n,i,s,u,o,l,c){super(),this.kind=e,this.name=r,this.handler=n,this.include=i,this.prevent_default=s,this.stop_propagation=u,this.immediate=o,this.debounce=l,this.throttle=c}},Xe=class extends x{constructor(e,r,n){super(),this.prevent_default=e,this.stop_propagation=r,this.message=n}},sr=class extends x{constructor(e){super(),this.kind=e}};function fs(t,e){for(;;){let r=t,n=e;if(r instanceof m)return n;{let i=r.head;if(i instanceof ue){let s=i.name;if(s==="")t=r.tail,e=n;else if(s==="class"){let u=i.value;if(u==="")t=r.tail,e=n;else{let o=r.tail;if(o instanceof m){let l=i;t=o,e=a(l,n)}else{let l=o.head;if(l instanceof ue)if(l.name==="class"){let p=i.kind,_=u,h=o.tail,y=l.value,b=_+" "+y,j=new ue(p,"class",b);t=a(j,h),e=n}else{let p=i;t=o,e=a(p,n)}else{let c=i;t=o,e=a(c,n)}}}}else if(s==="style"){let u=i.value;if(u==="")t=r.tail,e=n;else{let o=r.tail;if(o instanceof m){let l=i;t=o,e=a(l,n)}else{let l=o.head;if(l instanceof ue)if(l.name==="style"){let p=i.kind,_=u,h=o.tail,y=l.value,b=_+";"+y,j=new ue(p,"style",b);t=a(j,h),e=n}else{let p=i;t=o,e=a(p,n)}else{let c=i;t=o,e=a(c,n)}}}}else{let u=i;t=r.tail,e=a(u,n)}}else{let s=i;t=r.tail,e=a(s,n)}}}}function bn(t){if(t instanceof m)return t;if(t.tail instanceof m)return t;{let n=rn(t,(i,s)=>Bt(s,i));return fs(n,S)}}var or=0;function wn(t,e){return new ue(or,t,e)}var ur=1;function yn(t,e){return new Je(ur,t,e)}var lr=2;function gn(t,e,r,n,i,s,u,o){return new Q(lr,t,e,r,n,i,s,u,o)}var cr=0;var ar=new sr(cr);var fr=2;function Ke(t,e){return wn(t,e)}function vn(t,e){return yn(t,e)}function _s(t,e){return e?Ke(t,""):vn(t,rr(!1))}function kn(t){return Ke("class",t)}function Qe(t,e){return t===""||e===""?kn(""):Ke("style",t+":"+e+";")}function jn(t){return _s("disabled",t)}var Ot=class extends x{constructor(e,r,n){super(),this.synchronous=e,this.before_paint=r,this.after_paint=n}};var pr=new Ot(w([]),w([]),w([]));function ct(){return pr}function Sn(t){let e=r=>{let n=r.dispatch;return t(n)};return new Ot(w([e]),pr.before_paint,pr.after_paint)}function te(){return null}function ft(t,e){let r=t?.get(e);return r!=null?new O(r):new M(void 0)}function pt(t,e){return t&&t.has(e)}function Ce(t,e,r){return t??=new Map,t.set(e,r),t}function dr(t,e){return t?.delete(e),t}var It=class extends x{},Mt=class extends x{constructor(e,r){super(),this.key=e,this.parent=r}},_r=class extends x{constructor(e,r){super(),this.index=e,this.parent=r}};function ms(t,e){for(;;){let r=t,n=e;if(n instanceof m)return!1;{let i=n.head,s=n.tail,u=er(r,i);if(u)return u;t=r,e=s}}}function le(t,e,r){return r===""?new _r(e,t):new Mt(r,t)}var mr=new It,dt="	";function An(t,e){for(;;){let r=t,n=e;if(r instanceof It){if(n instanceof m)return"";{let i=n.tail;return an(i)}}else if(r instanceof Mt){let i=r.key;t=r.parent,e=a(dt,a(i,n))}else{let i=r.index;t=r.parent,e=a(dt,a(Ve(i),n))}}}function hs(t){return An(t,w([]))}function zn(t,e){return e instanceof m?!1:ms(hs(t),e)}var hr=`
`;function xr(t,e){return An(t,w([hr,e]))}var ne=class extends x{constructor(e,r,n,i,s){super(),this.kind=e,this.key=r,this.mapper=n,this.children=i,this.keyed_children=s}},ie=class extends x{constructor(e,r,n,i,s,u,o,l,c,p){super(),this.kind=e,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=u,this.children=o,this.keyed_children=l,this.self_closing=c,this.void=p}},se=class extends x{constructor(e,r,n,i){super(),this.kind=e,this.key=r,this.mapper=n,this.content=i}},Ze=class extends x{constructor(e,r,n,i,s,u,o){super(),this.kind=e,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=u,this.inner_html=o}};function bs(t,e){return e===""?t==="area"||t==="base"||t==="br"||t==="col"||t==="embed"||t==="hr"||t==="img"||t==="input"||t==="link"||t==="meta"||t==="param"||t==="source"||t==="track"?!0:t==="wbr":!1}function Cn(t,e){return e instanceof ne?new ne(e.kind,t,e.mapper,e.children,e.keyed_children):e instanceof ie?new ie(e.kind,t,e.mapper,e.namespace,e.tag,e.attributes,e.children,e.keyed_children,e.self_closing,e.void):e instanceof se?new se(e.kind,t,e.mapper,e.content):new Ze(e.kind,t,e.mapper,e.namespace,e.tag,e.attributes,e.inner_html)}var ce=0;function $r(t,e,r,n){return new ne(ce,t,e,r,n)}var Be=1;function _t(t,e,r,n,i,s,u,o,l){return new ie(Be,t,e,r,n,bn(i),s,u,o,l||bs(n,r))}var et=2;function br(t,e,r){return new se(et,t,e,r)}var Bn=3;var wr=(t,e)=>t===e,Oe=(t,e)=>{if(t===e)return!0;if(t==null||e==null)return!1;let r=typeof t;return r!==typeof e||r!=="object"||t.constructor!==e.constructor?!1:Array.isArray(t)?ws(t,e):ys(t,e)},ws=(t,e)=>{let r=t.length;if(r!==e.length)return!1;for(;r--;)if(!Oe(t[r],e[r]))return!1;return!0},ys=(t,e)=>{let r=Object.keys(t),n=r.length;if(Object.keys(e).length!==n)return!1;for(;n--;){let i=r[n];if(!Object.hasOwn(e,i)||!Oe(t[i],e[i]))return!1}return!0};var de=class extends x{constructor(e,r,n){super(),this.handlers=e,this.dispatched_paths=r,this.next_dispatched_paths=n}};function Mn(){return new de(te(),S,S)}function qn(t){return new de(t.handlers,t.next_dispatched_paths,S)}function Ln(t,e,r){return dr(t,xr(e,r))}function mt(t,e,r){let n=Ln(t.handlers,e,r);return new de(n,t.dispatched_paths,t.next_dispatched_paths)}function On(t,e,r){return pe(r,t,(n,i)=>{if(i instanceof Q){let s=i.name;return Ln(n,e,s)}else return n})}function Lt(t,e,r,n){let i=a(e,t.next_dispatched_paths),s=new de(t.handlers,t.dispatched_paths,i),u=ft(s.handlers,e+hr+r);if(u instanceof O){let o=u[0];return[s,Fe(n,o)]}else return[s,new M(w([]))]}function Ut(t,e){return zn(e,t.dispatched_paths)}function Un(t,e,r,n,i){return Ce(t,xr(r,n),jt(i,s=>new Xe(s.prevent_default,s.stop_propagation,e(s.message))))}function ht(t,e,r,n,i){let s=Un(t.handlers,e,r,n,i);return new de(s,t.dispatched_paths,t.next_dispatched_paths)}function Nn(t,e,r,n){return pe(n,t,(i,s)=>{if(s instanceof Q){let u=s.name,o=s.handler;return Un(i,e,r,u,o)}else return i})}function ve(t,e){let r=wr(t,K);return wr(e,K)?t:r?e:i=>t(e(i))}function In(t,e,r,n){for(;;){let i=t,s=e,u=r,o=n;if(o instanceof m)return i;{let l=o.head,c=o.tail;t=Dn(i,s,u,l),e=s,r=u+1,n=c}}}function Dn(t,e,r,n){if(n instanceof ne){let i=n.children,s=le(e,r,n.key);return In(t,s,0,i)}else if(n instanceof ie){let i=n.attributes,s=n.children,u=le(e,r,n.key),l=On(t,u,i);return In(l,u,0,s)}else{if(n instanceof se)return t;{let i=n.attributes,s=le(e,r,n.key);return On(t,s,i)}}}function $e(t,e,r,n){let i=Dn(t.handlers,e,r,n);return new de(i,t.dispatched_paths,t.next_dispatched_paths)}function yr(t,e,r,n,i){for(;;){let s=t,u=e,o=r,l=n,c=i;if(c instanceof m)return s;{let p=c.head,_=c.tail;t=Pn(s,u,o,l,p),e=u,r=o,n=l+1,i=_}}}function Pn(t,e,r,n,i){if(i instanceof ne){let s=i.children,u=le(r,n,i.key),o=ve(e,i.mapper);return yr(t,o,u,0,s)}else if(i instanceof ie){let s=i.attributes,u=i.children,o=le(r,n,i.key),l=ve(e,i.mapper),p=Nn(t,l,o,s);return yr(p,l,o,0,u)}else{if(i instanceof se)return t;{let s=i.attributes,u=le(r,n,i.key),o=ve(e,i.mapper);return Nn(t,o,u,s)}}}function je(t,e,r,n,i){let s=Pn(t.handlers,e,r,n,i);return new de(s,t.dispatched_paths,t.next_dispatched_paths)}function Fn(t,e,r,n,i){let s=yr(t.handlers,e,r,n,i);return new de(s,t.dispatched_paths,t.next_dispatched_paths)}function $t(t,e,r){return _t("",K,"",t,e,r,te(),!1,!1)}function Dt(t){return br("",K,t)}function Rn(){return br("",K,"")}function Pt(t){return Dt(t)}function Vn(t,e){return $t("h1",t,e)}function gr(t,e){return $t("div",t,e)}function Hn(t,e){return $t("button",t,e)}var tt=class extends x{constructor(e,r,n,i){super(),this.index=e,this.removed=r,this.changes=n,this.children=i}},kr=class extends x{constructor(e,r){super(),this.kind=e,this.content=r}},vr=class extends x{constructor(e,r){super(),this.kind=e,this.inner_html=r}},jr=class extends x{constructor(e,r,n){super(),this.kind=e,this.added=r,this.removed=n}},Er=class extends x{constructor(e,r,n){super(),this.kind=e,this.key=r,this.before=n}},Sr=class extends x{constructor(e,r,n){super(),this.kind=e,this.index=r,this.with=n}},Ar=class extends x{constructor(e,r){super(),this.kind=e,this.index=r}},zr=class extends x{constructor(e,r,n){super(),this.kind=e,this.children=r,this.before=n}};function Tr(t,e,r,n){return new tt(t,e,r,n)}var Cr=0;function Wn(t){return new kr(Cr,t)}var Br=1;function Yn(t){return new vr(Br,t)}var Or=2;function Nr(t,e){return new jr(Or,t,e)}var Ir=3;function Jn(t,e){return new Er(Ir,t,e)}var Mr=4;function Xn(t){return new Ar(Mr,t)}var qr=5;function Ne(t,e){return new Sr(qr,t,e)}var Lr=6;function Ur(t,e){return new zr(Lr,t,e)}var Ft=class extends x{constructor(e,r){super(),this.patch=e,this.events=r}},Dr=class extends x{constructor(e,r,n){super(),this.added=e,this.removed=r,this.events=n}};function Ss(t,e,r,n){return r==="input"&&e===""?Ut(t,n):r==="select"&&e===""?Ut(t,n):r==="textarea"&&e===""?Ut(t,n):!1}function Zn(t,e,r,n,i,s,u,o){for(;;){let l=t,c=e,p=r,_=n,h=i,y=s,b=u,j=o;if(y instanceof m){if(h instanceof m)return new Dr(b,j,_);{let d=h.head;if(d instanceof Q){let E=d,$=h.tail,k=d.name,A=a(E,j),f=mt(_,c,k);t=l,e=c,r=p,n=f,i=$,s=y,u=b,o=A}else{let E=d,$=h.tail,k=a(E,j);t=l,e=c,r=p,n=_,i=$,s=y,u=b,o=k}}}else if(h instanceof m){let d=y.head;if(d instanceof Q){let E=d,$=y.tail,k=d.name,A=d.handler,f=a(E,b),g=ht(_,p,c,k,A);t=l,e=c,r=p,n=g,i=h,s=$,u=f,o=j}else{let E=d,$=y.tail,k=a(E,b);t=l,e=c,r=p,n=_,i=h,s=$,u=k,o=j}}else{let d=y.head,E=y.tail,$=h.head,k=h.tail,A=Bt($,d);if(A instanceof G)if($ instanceof Q){let f=$.name,g=a($,j),v=mt(_,c,f);t=l,e=c,r=p,n=v,i=k,s=y,u=b,o=g}else{let f=a($,j);t=l,e=c,r=p,n=_,i=k,s=y,u=b,o=f}else if(A instanceof W)if(d instanceof ue)if($ instanceof ue){let f,g=d.name;g==="value"||g==="checked"||g==="selected"?f=l||$.value!==d.value:f=$.value!==d.value;let v=f,T;v?T=a(d,b):T=b;let C=T;t=l,e=c,r=p,n=_,i=k,s=E,u=C,o=j}else if($ instanceof Q){let f=$.name,g=a(d,b),v=a($,j),T=mt(_,c,f);t=l,e=c,r=p,n=T,i=k,s=E,u=g,o=v}else{let f=a(d,b),g=a($,j);t=l,e=c,r=p,n=_,i=k,s=E,u=f,o=g}else if(d instanceof Je)if($ instanceof Je){let f,g=d.name;g==="scrollLeft"||g==="scrollRight"?f=!0:g==="value"?f=l||!Oe($.value,d.value):g==="checked"?f=l||!Oe($.value,d.value):g==="selected"?f=l||!Oe($.value,d.value):f=!Oe($.value,d.value);let v=f,T;v?T=a(d,b):T=b;let C=T;t=l,e=c,r=p,n=_,i=k,s=E,u=C,o=j}else if($ instanceof Q){let f=$.name,g=a(d,b),v=a($,j),T=mt(_,c,f);t=l,e=c,r=p,n=T,i=k,s=E,u=g,o=v}else{let f=a(d,b),g=a($,j);t=l,e=c,r=p,n=_,i=k,s=E,u=f,o=g}else if($ instanceof Q){let f=d.name,g=d.handler,v=$.prevent_default.kind!==d.prevent_default.kind||$.stop_propagation.kind!==d.stop_propagation.kind||$.immediate!==d.immediate||$.debounce!==d.debounce||$.throttle!==d.throttle,T;v?T=a(d,b):T=b;let C=T,I=ht(_,p,c,f,g);t=l,e=c,r=p,n=I,i=k,s=E,u=C,o=j}else{let f=d.name,g=d.handler,v=a(d,b),T=a($,j),C=ht(_,p,c,f,g);t=l,e=c,r=p,n=C,i=k,s=E,u=v,o=T}else if(d instanceof Q){let f=d.name,g=d.handler,v=a(d,b),T=ht(_,p,c,f,g);t=l,e=c,r=p,n=T,i=h,s=E,u=v,o=j}else{let f=a(d,b);t=l,e=c,r=p,n=_,i=h,s=E,u=f,o=j}}}}function Pr(t,e,r,n,i,s,u,o,l,c,p,_,h,y){for(;;){let b=t,j=e,d=r,E=n,$=i,k=s,A=u,f=o,g=l,v=c,T=p,C=_,I=h,H=y;if(d instanceof m){if(b instanceof m)return new Ft(new tt(g,A,T,C),H);{let Z=b.head,_e=b.tail,F;Z.key===""||!pt($,Z.key)?F=A+1:F=A;let z=F,D=$e(H,v,f,Z);t=_e,e=j,r=d,n=E,i=$,s=k,u=z,o=f,l=g,c=v,p=T,_=C,h=I,y=D}}else if(b instanceof m){let Z=Fn(H,I,v,f,d),_e=Ur(d,f-k),F=a(_e,T);return new Ft(new tt(g,A,F,C),Z)}else{let Z=d.head,_e=b.head;if(_e.key!==Z.key){let F=d.tail,P=b.tail,z=ft(j,Z.key),D=pt(E,_e.key);if(z instanceof O)if(D){let N=z[0];if(pt($,_e.key))t=P,e=j,r=d,n=E,i=$,s=k-1,u=A,o=f,l=g,c=v,p=T,_=C,h=I,y=H;else{let U=f-k,B=a(Jn(Z.key,U),T),R=Ce($,Z.key,void 0),L=k+1;t=a(N,b),e=j,r=d,n=E,i=R,s=L,u=A,o=f,l=g,c=v,p=B,_=C,h=I,y=H}}else{let N=f-k,q=a(Xn(N),T),U=$e(H,v,f,_e),B=k-1;t=P,e=j,r=d,n=E,i=$,s=B,u=A,o=f,l=g,c=v,p=q,_=C,h=I,y=U}else if(D){let N=f-k,q=je(H,I,v,f,Z),U=Ur(w([Z]),N),B=a(U,T);t=b,e=j,r=F,n=E,i=$,s=k+1,u=A,o=f+1,l=g,c=v,p=B,_=C,h=I,y=q}else{let N=Ne(f-k,Z),q,B=$e(H,v,f,_e);q=je(B,I,v,f,Z);let R=q;t=P,e=j,r=F,n=E,i=$,s=k,u=A,o=f+1,l=g,c=v,p=a(N,T),_=C,h=I,y=R}}else{let F=b.head;if(F instanceof ne){let P=d.head;if(P instanceof ne){let z=P,D=d.tail,N=F,q=b.tail,U=ve(I,z.mapper),B=le(v,f,z.key),R=Pr(N.children,N.keyed_children,z.children,z.keyed_children,te(),0,0,0,f,B,S,S,U,H),L,V=R.patch;V.children instanceof m?V.changes instanceof m?V.removed===0?L=C:L=a(R.patch,C):L=a(R.patch,C):L=a(R.patch,C);let ae=L;t=q,e=j,r=D,n=E,i=$,s=k,u=A,o=f+1,l=g,c=v,p=T,_=ae,h=I,y=R.events}else{let z=P,D=d.tail,N=F,q=b.tail,U=Ne(f-k,z),B,L=$e(H,v,f,N);B=je(L,I,v,f,z);let V=B;t=q,e=j,r=D,n=E,i=$,s=k,u=A,o=f+1,l=g,c=v,p=a(U,T),_=C,h=I,y=V}}else if(F instanceof ie){let P=d.head;if(P instanceof ie){let z=P,D=F;if(D.namespace===z.namespace&&D.tag===z.tag){let N=d.tail,q=b.tail,U=ve(I,z.mapper),B=le(v,f,z.key),R=Ss(H,z.namespace,z.tag,B),L=Zn(R,B,U,H,D.attributes,z.attributes,S,S),V,me,ae;V=L.added,me=L.removed,ae=L.events;let Ee;me instanceof m&&V instanceof m?Ee=S:Ee=w([Nr(V,me)]);let Ue=Ee,De=Pr(D.children,D.keyed_children,z.children,z.keyed_children,te(),0,0,0,f,B,Ue,S,U,ae),ye,Se=De.patch;Se.children instanceof m?Se.changes instanceof m?Se.removed===0?ye=C:ye=a(De.patch,C):ye=a(De.patch,C):ye=a(De.patch,C);let gi=ye;t=q,e=j,r=N,n=E,i=$,s=k,u=A,o=f+1,l=g,c=v,p=T,_=gi,h=I,y=De.events}else{let N=P,q=d.tail,U=F,B=b.tail,R=Ne(f-k,N),L,me=$e(H,v,f,U);L=je(me,I,v,f,N);let ae=L;t=B,e=j,r=q,n=E,i=$,s=k,u=A,o=f+1,l=g,c=v,p=a(R,T),_=C,h=I,y=ae}}else{let z=P,D=d.tail,N=F,q=b.tail,U=Ne(f-k,z),B,L=$e(H,v,f,N);B=je(L,I,v,f,z);let V=B;t=q,e=j,r=D,n=E,i=$,s=k,u=A,o=f+1,l=g,c=v,p=a(U,T),_=C,h=I,y=V}}else if(F instanceof se){let P=d.head;if(P instanceof se){let z=P;if(F.content===z.content){let N=d.tail;t=b.tail,e=j,r=N,n=E,i=$,s=k,u=A,o=f+1,l=g,c=v,p=T,_=C,h=I,y=H}else{let N=P,q=d.tail,U=b.tail,B=Tr(f,0,w([Wn(N.content)]),S);t=U,e=j,r=q,n=E,i=$,s=k,u=A,o=f+1,l=g,c=v,p=T,_=a(B,C),h=I,y=H}}else{let z=P,D=d.tail,N=F,q=b.tail,U=Ne(f-k,z),B,L=$e(H,v,f,N);B=je(L,I,v,f,z);let V=B;t=q,e=j,r=D,n=E,i=$,s=k,u=A,o=f+1,l=g,c=v,p=a(U,T),_=C,h=I,y=V}}else{let P=d.head;if(P instanceof Ze){let z=P,D=d.tail,N=F,q=b.tail,U=ve(I,z.mapper),B=le(v,f,z.key),R=Zn(!1,B,U,H,N.attributes,z.attributes,S,S),L,V,me;L=R.added,V=R.removed,me=R.events;let ae;V instanceof m&&L instanceof m?ae=S:ae=w([Nr(L,V)]);let Ee=ae,Ue;N.inner_html===z.inner_html?Ue=Ee:Ue=a(Yn(z.inner_html),Ee);let ye=Ue,Se;ye instanceof m?Se=C:Se=a(Tr(f,0,ye,w([])),C);let Qr=Se;t=q,e=j,r=D,n=E,i=$,s=k,u=A,o=f+1,l=g,c=v,p=T,_=Qr,h=I,y=me}else{let z=P,D=d.tail,N=F,q=b.tail,U=Ne(f-k,z),B,L=$e(H,v,f,N);B=je(L,I,v,f,z);let V=B;t=q,e=j,r=D,n=E,i=$,s=k,u=A,o=f+1,l=g,c=v,p=a(U,T),_=C,h=I,y=V}}}}}}function Fr(t,e,r){return Pr(w([e]),te(),w([r]),te(),te(),0,0,0,0,mr,S,S,K,qn(t))}var zs=globalThis.setTimeout,Rr=globalThis.clearTimeout,Ts=(t,e)=>re().createElementNS(t,e),Cs=t=>re().createTextNode(t),Bs=()=>re().createDocumentFragment(),rt=(t,e,r)=>t.insertBefore(e,r),ei=_n?(t,e,r)=>t.moveBefore(e,r):rt,Os=(t,e)=>t.removeChild(e),Ns=(t,e)=>t.getAttribute(e),ti=(t,e,r)=>t.setAttribute(e,r),Is=(t,e)=>t.removeAttribute(e),Ms=(t,e,r,n)=>t.addEventListener(e,r,n),ri=(t,e,r)=>t.removeEventListener(e,r),qs=(t,e)=>t.innerHTML=e,Ls=(t,e)=>t.data=e,be=Symbol("lustre"),Hr=class{constructor(e,r,n,i){this.kind=e,this.key=i,this.parent=r,this.children=[],this.node=n,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===ce?this.node.parentNode:this.node}};var we=(t,e,r,n,i)=>{let s=new Hr(t,e,r,i);return r[be]=s,e?.children.splice(n,0,s),s},Us=t=>{let e="";for(let r=t[be];r.parent;r=r.parent)if(r.key)e=`${dt}${r.key}${e}`;else{let n=r.parent.children.indexOf(r);e=`${dt}${n}${e}`}return e.slice(1)},Rt=class{#e=null;#i=()=>{};#c=!1;#a=!1;constructor(e,r,{useServerEvents:n=!1,exposeKeys:i=!1}={}){this.#e=e,this.#i=r,this.#c=n,this.#a=i}mount(e){we(Be,null,this.#e,0,null),this.#$(this.#e,null,this.#e[be],0,e)}push(e){this.#t.push({node:this.#e[be],patch:e}),this.#_()}#t=[];#_(){let e=this.#t;for(;e.length;){let{node:r,patch:n}=e.pop(),{children:i}=r,{changes:s,removed:u,children:o}=n;Ie(s,l=>this.#s(r,l)),u&&this.#d(r,i.length-u,u),Ie(o,l=>{let c=i[l.index|0];this.#t.push({node:c,patch:l})})}}#s(e,r){switch(r.kind){case Cr:this.#k(e,r);break;case Br:this.#b(e,r);break;case Or:this.#m(e,r);break;case Ir:this.#o(e,r);break;case Mr:this.#n(e,r);break;case qr:this.#p(e,r);break;case Lr:this.#f(e,r);break}}#f(e,{children:r,before:n}){let i=Bs(),s=this.#r(e,n);this.#x(i,null,e,n|0,r),rt(e.parentNode,i,s)}#p(e,{index:r,with:n}){this.#d(e,r|0,1);let i=this.#r(e,r);this.#$(e.parentNode,i,e,r|0,n)}#r(e,r){r=r|0;let{children:n}=e,i=n.length;if(r<i)return n[r].node;let s=n[i-1];if(!s&&e.kind!==ce)return null;for(s||(s=e);s.kind===ce&&s.children.length;)s=s.children[s.children.length-1];return s.node.nextSibling}#o(e,{key:r,before:n}){n=n|0;let{children:i,parentNode:s}=e,u=i[n].node,o=i[n];for(let _=n+1;_<i.length;++_){let h=i[_];if(i[_]=o,o=h,h.key===r){i[n]=h;break}}let{kind:l,node:c,children:p}=o;ei(s,c,u),l===ce&&this.#u(s,p,u)}#u(e,r,n){for(let i=0;i<r.length;++i){let{kind:s,node:u,children:o}=r[i];ei(e,u,n),s===ce&&this.#u(e,o,n)}}#n(e,{index:r}){this.#d(e,r,1)}#d(e,r,n){let{children:i,parentNode:s}=e,u=i.splice(r,n);for(let o=0;o<u.length;++o){let{kind:l,node:c,children:p}=u[o];Os(s,c),this.#l(u[o]),l===ce&&u.push(...p)}}#l(e){let{debouncers:r,children:n}=e;for(let{timeout:i}of r.values())i&&Rr(i);r.clear(),Ie(n,i=>this.#l(i))}#m({node:e,handlers:r,throttles:n,debouncers:i},{added:s,removed:u}){Ie(u,({name:o})=>{r.delete(o)?(ri(e,o,Vr),this.#h(n,o,0),this.#h(i,o,0)):(Is(e,o),ii[o]?.removed?.(e,o))}),Ie(s,o=>this.#g(e,o))}#k({node:e},{content:r}){Ls(e,r??"")}#b({node:e},{inner_html:r}){qs(e,r??"")}#x(e,r,n,i,s){Ie(s,u=>this.#$(e,r,n,i++,u))}#$(e,r,n,i,s){switch(s.kind){case Be:{let u=this.#w(n,i,s);this.#x(u,null,u[be],0,s.children),rt(e,u,r);break}case et:{let u=this.#y(n,i,s);rt(e,u,r);break}case ce:{let u=this.#y(n,i,s);rt(e,u,r),this.#x(e,r,u[be],0,s.children);break}case Bn:{let u=this.#w(n,i,s);this.#b({node:u},s),rt(e,u,r);break}}}#w(e,r,{kind:n,key:i,tag:s,namespace:u,attributes:o}){let l=Ts(u||zt,s);return we(n,e,l,r,i),this.#a&&i&&ti(l,"data-lustre-key",i),Ie(o,c=>this.#g(l,c)),l}#y(e,r,{kind:n,key:i,content:s}){let u=Cs(s??"");return we(n,e,u,r,i),u}#g(e,r){let{debouncers:n,handlers:i,throttles:s}=e[be],{kind:u,name:o,value:l,prevent_default:c,debounce:p,throttle:_}=r;switch(u){case or:{let h=l??"";if(o==="virtual:defaultValue"){e.defaultValue=h;return}h!==Ns(e,o)&&ti(e,o,h),ii[o]?.added?.(e,h);break}case ur:e[o]=l;break;case lr:{i.has(o)&&ri(e,o,Vr);let h=c.kind===cr;Ms(e,o,Vr,{passive:h}),this.#h(s,o,_),this.#h(n,o,p),i.set(o,y=>this.#v(r,y));break}}}#h(e,r,n){let i=e.get(r);if(n>0)i?i.delay=n:e.set(r,{delay:n});else if(i){let{timeout:s}=i;s&&Rr(s),e.delete(r)}}#v(e,r){let{currentTarget:n,type:i}=r,{debouncers:s,throttles:u}=n[be],o=Us(n),{prevent_default:l,stop_propagation:c,include:p,immediate:_}=e;l.kind===fr&&r.preventDefault(),c.kind===fr&&r.stopPropagation(),i==="submit"&&(r.detail??={},r.detail.formData=[...new FormData(r.target,r.submitter).entries()]);let h=this.#c?Ds(r,p??[]):r,y=u.get(i);if(y){let j=Date.now(),d=y.last||0;j>d+y.delay&&(y.last=j,y.lastEvent=r,this.#i(h,o,i,_))}let b=s.get(i);b&&(Rr(b.timeout),b.timeout=zs(()=>{r!==u.get(i)?.lastEvent&&this.#i(h,o,i,_)},b.delay)),!y&&!b&&this.#i(h,o,i,_)}},Ie=(t,e)=>{if(Array.isArray(t))for(let r=0;r<t.length;r++)e(t[r]);else if(t)for(t;t.head;t=t.tail)e(t.head)},Vr=t=>{let{currentTarget:e,type:r}=t;e[be].handlers.get(r)(t)},Ds=(t,e=[])=>{let r={};(t.type==="input"||t.type==="change")&&e.push("target.value"),t.type==="submit"&&e.push("detail.formData");for(let n of e){let i=n.split(".");for(let s=0,u=t,o=r;s<i.length;s++){if(s===i.length-1){o[i[s]]=u[i[s]];break}o=o[i[s]]??={},u=u[i[s]]}}return r},ni=t=>({added(e){e[t]=!0},removed(e){e[t]=!1}}),Ps=t=>({added(e,r){e[t]=r}}),ii={checked:ni("checked"),selected:ni("selected"),value:Ps("value"),autofocus:{added(t){queueMicrotask(()=>{t.focus?.()})}},autoplay:{added(t){try{t.play?.()}catch(e){console.error(e)}}}};function Fs(t,e,r){for(;;){let n=t,i=e,s=r;if(n instanceof m)return[i,X(s)];{let u=n.tail,o=n.head[0],l=n.head[1],c=Cn(o,l),p;o===""?p=i:p=Ce(i,o,c);let _=p,h=a(c,s);t=u,e=_,r=h}}}function Gr(t){return Fs(t,te(),S)}function si(t,e,r){let n=Gr(r),i,s;return i=n[0],s=n[1],_t("",K,"",t,e,s,i,!1,!1)}function oi(t,e,r,n){let i=Gr(n),s,u;return s=i[0],u=i[1],_t("",K,t,e,r,u,s,!1,!1)}function ui(t){let e=Gr(t),r,n;return r=e[0],n=e[1],$r("",K,n,r)}var li=t=>{let e=we(Be,null,t,0,null),r=0;for(let u=t.firstChild;u;u=u.nextSibling)ci(u)&&(r+=1);if(r===0){let u=re().createTextNode("");return we(et,e,u,0,null),t.replaceChildren(u),Rn()}if(r===1)return Wr(e,t).head[1];let n=re().createTextNode(""),i=we(ce,e,n,0,null),s=Wr(i,t);return t.insertBefore(n,t.firstChild),ui(s)},ci=t=>{switch(t.nodeType){case Tt:return!0;case nr:return!!t.data;default:return!1}},Rs=(t,e,r,n)=>{if(!ci(e))return null;switch(e.nodeType){case Tt:{let i=we(Be,t,e,n,r),s=e.localName,u=e.namespaceURI,o=!u||u===zt;o&&Vs.includes(s)&&Hs(s,e);let l=Gs(e),c=Wr(i,e);return o?si(s,l,c):oi(u,s,l,c)}case nr:return we(et,t,e,n,null),Dt(e.data);default:return null}},Vs=["input","select","textarea"],Hs=(t,e)=>{let r=e.value,n=e.checked;t==="input"&&e.type==="checkbox"&&!n||t==="input"&&e.type==="radio"&&!n||e.type!=="checkbox"&&e.type!=="radio"&&!r||queueMicrotask(()=>{e.value=r,e.checked=n,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),re().activeElement!==e&&e.dispatchEvent(new Event("blur",{bubbles:!0}))})},Wr=(t,e)=>{let r=null,n=e.firstChild,i=null,s=0;for(;n;){let u=n.nodeType===Tt?n.getAttribute("data-lustre-key"):null;u!=null&&n.removeAttribute("data-lustre-key");let o=Rs(t,n,u,s),l=n.nextSibling;if(o){let c=new oe([u??"",o],null);i?i=i.tail=c:i=r=c,s+=1}else e.removeChild(n);n=l}return i?(i.tail=S,r):S},Gs=t=>{let e=t.attributes.length,r=S;for(;e-- >0;){let n=t.attributes[e];n.name!=="xmlns"&&(r=new oe(Ws(n),r))}return r},Ws=t=>{let e=t.localName,r=t.value;return Ke(e,r)};var wt=()=>!!re();var bt=class{constructor(e,[r,n],i,s){this.root=e,this.#e=r,this.#i=i,this.#c=s,this.root.addEventListener("context-request",u=>{if(!(u.context&&u.callback)||!this.#s.has(u.context))return;u.stopImmediatePropagation();let o=this.#s.get(u.context);if(u.subscribe){let l=new WeakRef(u.callback),c=()=>{o.subscribers=o.subscribers.filter(p=>p!==l)};o.subscribers.push([l,c]),u.callback(o.value,c)}else u.callback(o.value)}),this.#_=new Rt(this.root,(u,o,l)=>{let[c,p]=Lt(this.#t,o,l,u);if(this.#t=c,p.isOk()){let _=p[0];_.stop_propagation&&u.stopPropagation(),_.prevent_default&&u.preventDefault(),this.dispatch(_.message,!1)}}),this.#a=li(this.root),this.#t=Mn(),this.#n=!0,this.#l(n)}root=null;dispatch(e,r=!1){if(this.#n||=r,this.#f)this.#p.push(e);else{let[n,i]=this.#c(this.#e,e);this.#e=n,this.#l(i)}}emit(e,r){(this.root.host??this.root).dispatchEvent(new CustomEvent(e,{detail:r,bubbles:!0,composed:!0}))}provide(e,r){if(!this.#s.has(e))this.#s.set(e,{value:r,subscribers:[]});else{let n=this.#s.get(e);n.value=r;for(let i=n.subscribers.length-1;i>=0;i--){let[s,u]=n.subscribers[i],o=s.deref();if(!o){n.subscribers.splice(i,1);continue}o(r,u)}}}#e;#i;#c;#a;#t;#_;#s=new Map;#f=!1;#p=[];#r=S;#o=S;#u=null;#n=!1;#d={dispatch:(e,r)=>this.dispatch(e,r),emit:(e,r)=>this.emit(e,r),select:()=>{},root:()=>this.root,provide:(e,r)=>this.provide(e,r)};#l(e){for(this.#f=!0;;){for(let r=e.synchronous;r.tail;r=r.tail)r.head(this.#d);if(this.#r=fi(this.#r,e.before_paint),this.#o=fi(this.#o,e.after_paint),!this.#p.length)break;[this.#e,e]=this.#c(this.#e,this.#p.shift())}this.#f=!1,this.#n?(cancelAnimationFrame(this.#u),this.#m()):this.#u||(this.#u=requestAnimationFrame(()=>{this.#m()}))}#m(){this.#n=!1,this.#u=null;let e=this.#i(this.#e),{patch:r,events:n}=Fr(this.#t,this.#a,e);if(this.#t=n,this.#a=e,this.#_.push(r),this.#r instanceof oe){let i=ai(this.#r);this.#r=S,queueMicrotask(()=>{this.#n=!0,this.#l(i)})}if(this.#o instanceof oe){let i=ai(this.#o);this.#o=S,requestAnimationFrame(()=>{this.#n=!0,this.#l(i)})}}};function ai(t){return{synchronous:t,after_paint:S,before_paint:S}}function fi(t,e){return t instanceof m?e:e instanceof m?t:Kt(t,e)}var Me=class extends x{constructor(e){super(),this.message=e}},nt=class extends x{constructor(e,r){super(),this.name=e,this.data=r}};var qe=class extends x{};var Yr=class extends x{constructor(e,r,n,i,s,u,o,l,c,p){super(),this.open_shadow_root=e,this.adopt_styles=r,this.delegates_focus=n,this.attributes=i,this.properties=s,this.contexts=u,this.is_form_associated=o,this.on_form_autofill=l,this.on_form_reset=c,this.on_form_restore=p}};function di(t){let e=new Yr(!0,!0,!1,S,S,S,!1,Ct,Ct,Ct);return pe(t,e,(r,n)=>n.apply(r))}var Jr=class{#e;constructor(e,[r,n],i,s){this.#e=new bt(e,[r,n],s,i)}send(e){switch(e.constructor){case Me:{this.dispatch(e.message,!1);break}case nt:{this.emit(e.name,e.data);break}case qe:break}}dispatch(e,r){this.#e.dispatch(e,r)}emit(e,r){this.#e.emit(e,r)}},mi=({init:t,update:e,view:r},n,i)=>{if(!wt())return new M(new it);let s=n instanceof HTMLElement?n:re().querySelector(n);return s?new O(new Jr(s,t(i),e,r)):new M(new Vt(n))};var Xr=class extends x{constructor(e,r,n,i){super(),this.init=e,this.update=r,this.view=n,this.config=i}};var Vt=class extends x{constructor(e){super(),this.selector=e}},it=class extends x{};function hi(t,e,r){return new Xr(t,e,r,di(S))}function xi(t,e,r){return pn(!wt(),new M(new it),()=>mi(t,e,r))}function to(t){return t==="input"||t==="change"||t==="focus"||t==="focusin"||t==="focusout"||t==="blur"?!0:t==="select"}function ro(t,e){return gn(t,jt(e,r=>new Xe(!1,!1,r)),S,ar,ar,to(t),0,0)}function $i(t){return ro("click",Zt(t))}var Ed=typeof window<"u"&&window.__TAURI_INTERNALS__,Le=null;function bi(t){Le=t}async function wi(t,e){try{if(typeof window<"u"&&window.__TAURI_INTERNALS__){let r=await window.__TAURI_INTERNALS__.invoke(t,e);return Le&&Le(t,r),r}if(typeof window<"u"&&window.__TAURI__){let r=await window.__TAURI__.core.invoke(t,e);return Le&&Le(t,r),r}throw new Error("Tauri globals not found")}catch(r){console.log("Tauri not available, using simulation:",r.message);let n=`Simulated result for ${t}`;return Le&&Le(t,n),n}}var io="src\\tauri_lustre_app.gleam",yt=class extends x{constructor(e,r){super(),this.greeting=e,this.loading=r}},Ht=class extends x{constructor(e){super(),this[0]=e}},Kr=class extends x{constructor(e,r){super(),this[0]=e,this[1]=r}};function so(t){return[new yt("Click the button to greet!",!1),ct()]}function oo(t,e){if(e instanceof Ht){let r=e[0],n=At(w([["name",Ge("Chouaib")]])),i=Sn(s=>(bi((u,o)=>s(new Kr(u,o))),wi(r,n)));return[new yt(t.greeting,!0),i]}else{let r=e[0],n=e[1];return[new yt("Command "+r+" \u2192 "+n,!1),ct()]}}function uo(t){return gr(w([Qe("padding","20px")]),w([Vn(w([]),w([Pt("Lustre + Tauri Example")])),gr(w([Qe("margin","20px 0")]),w([Pt(t.greeting)])),Hn(w([$i(new Ht("greet")),jn(t.loading),Qe("padding","10px 20px"),Qe("font-size","16px"),Qe("cursor",t.loading?"wait":"pointer")]),w([Pt(t.loading?"Loading...":"Run Tauri Command!")]))]))}function yi(){let t=hi(so,oo,uo),e=xi(t,"#app",void 0);if(!(e instanceof O))throw Wt("let_assert",io,"tauri_lustre_app",78,"main","Pattern match failed, no pattern matched the value.",{value:e,start:2157,end:2206,pattern_start:2168,pattern_end:2173})}yi();
